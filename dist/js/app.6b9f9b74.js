(function(t){function e(e){for(var i,n,s=e[0],c=e[1],l=e[2],d=0,u=[];d<s.length;d++)n=s[d],Object.prototype.hasOwnProperty.call(o,n)&&o[n]&&u.push(o[n][0]),o[n]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(t[i]=c[i]);p&&p(e);while(u.length)u.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],i=!0,s=1;s<a.length;s++){var c=a[s];0!==o[c]&&(i=!1)}i&&(r.splice(e--,1),t=n(n.s=a[0]))}return t}var i={},o={app:0},r=[];function n(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=i,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(a,i,function(e){return t[e]}.bind(null,i));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var l=0;l<s.length;l++)e(s[l]);var p=c;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"3ec3":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var i=a("2b0e"),o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"body"},[e("div",{attrs:{id:"container"}}),t._m(0),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowTips,expression:"isShowTips"}],staticClass:"tips"},[t._v(" 正在下载，请耐心等待。。。(可打开控制台查看进度详情) ")])])},r=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"echarts"},[e("div",{attrs:{id:"map"}})])}],n=(a("7f7f"),a("386d"),a("6c7b"),a("c4e3")),s=a.n(n),c={name:"demo",components:{},data:function(){return{isShowAD:!0,nameType:"",cityName:"中国",areaCode:1e4,geoJsonData:"",echartsMap:null,map:null,uimap:null,district:null,polygons:[],cityCode:1e5,citySelect:null,districtSelect:null,opts:{},mapData:[],zip:{},codeList:[],loadedNode:{},waitToLoadList:[],loadingThreads:new Array(8).fill(null),downloadTips:"下载geoJson数据",isShowTips:!1}},mounted:function(){var t=this;this.zip=new s.a,this.citySelect=document.getElementById("city"),this.districtSelect=document.getElementById("district"),this.echartsMap=this.$echarts.init(document.getElementById("map")),this.echartsMap.on("click",this.echartsMapClick),this.map=new AMap.Map("container",{resizeEnable:!0,center:[116.30946,39.937629],zoom:3}),this.opts={subdistrict:1,showbiz:!1},AMap.plugin("AMap.DistrictSearch",(function(){t.district=new AMap.DistrictSearch(t.opts),t.district.search("中国",(function(e,a){"complete"===e&&t.getData(a.districtList[0],"",1e5)}))}))},methods:{echartsMapClick:function(t){var e=this;if("street"!=t.data.level){for(var a=0,i=this.polygons.length;a<i;a++)this.polygons[a].setMap(null);this.cityName=t.data.name,this.cityCode=t.data.cityCode,this.district.setLevel(t.data.level),this.district.setExtensions("all"),this.district.search(this.cityCode,(function(a,i){"complete"===a&&e.getData(i.districtList[0],t.data.level,e.cityCode)}))}},loadMapData:function(t){var e=this;AMapUI.loadUI(["geo/DistrictExplorer"],(function(a){var i=window.districtExplorer=new a({eventSupport:!0,map:e.map});i.loadAreaNode(t,(function(t,a){if(t)console.error(t);else{var i={type:"FeatureCollection"};i.features=a.getSubFeatures(),e.loadMap(e.cityName,i),e.geoJsonData=i}}))}))},showTips:function(){var t=this;this.isShowTips=!0,setTimeout((function(){t.isShowTips=!1}),3e3)},loadMap:function(t,e){if(e){this.$echarts.registerMap(t,e);var a={visualMap:{type:"piecewise",pieces:[{max:30,label:"安全",color:"#2c9a42"},{min:30,max:60,label:"警告",color:"#d08a00"},{min:60,label:"危险",color:"#c23c33"}],color:"#fff",textStyle:{color:"#fff"},visibility:"off"},series:[{name:"数据名称",type:"map",roam:!1,mapType:t,selectedMode:"single",showLegendSymbol:!1,visibility:"off",itemStyle:{normal:{color:"#ccc",areaColor:"#fff",borderColor:"#fff",borderWidth:.5,label:{show:!0,textStyle:{color:"rgb(249, 249, 249)"}}},emphasis:{areaColor:!1,borderColor:"#fff",areaStyle:{color:"#fff"},label:{show:!0,textStyle:{color:"rgb(249, 249, 249)"}}}},data:this.mapData}]};this.echartsMap.setOption(a)}},getData:function(t,e,a){var i=t.districtList;if(i){var o=i[0].level;if("street"===o){var r=this.geoJsonData.features,n={};for(var s in r)r[s].properties.name==this.cityName&&(n.type="FeatureCollection",n.features=[].concat(r[s]));return this.mapData=[],this.mapData.push({name:this.cityName,value:100*Math.random(),level:o}),void this.loadMap(this.cityName,n)}this.mapData=[];for(var c=0,l=i.length;c<l;c++){var p=i[c].name,d=i[c].adcode;this.mapData.push({name:p,value:100*Math.random(),cityCode:d,level:o})}this.loadMapData(a)}}}},l=c,p=(a("8371"),a("2877")),d=Object(p["a"])(l,o,r,!1,null,"1d1ee078",null),u=d.exports,f=a("313e"),h=a.n(f);i["a"].config.productionTip=!1,i["a"].prototype.$echarts=h.a,new i["a"]({render:function(t){return t(u)}}).$mount("#app")},8371:function(t,e,a){"use strict";a("3ec3")}});
//# sourceMappingURL=app.6b9f9b74.js.map